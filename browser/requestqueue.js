!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.RequestQueue=t()}}(function(){return function t(e,o,r){function n(s,u){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){var o=e[s][1][t];return n(o?o:t)},p,p.exports,t,e,o,r)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,o){"use strict";function r(t,e){var o,r,s,u,a="";return u="string"==typeof t||t instanceof String==!0?i(t):t,s=u.protocol,s&&u.hostname?(s.indexOf(":")===s.length-1&&(s=s.substr(0,s.length-1)),r=u.port,null==r&&void 0!==e.defaultPorts[s]&&(r=e.defaultPorts[s]),e.ignoreSchemes===!1&&(a+=s+"://"),e.ignoreSubdomains===!1?a+=u.hostname:(o=n(u.hostname),a+=null===o?u.hostname:o.domain+"."+o.tld),e.ignorePorts===!1&&null!=r&&(a+=":"+r),a+="/"):!1}var n,i,s=t("is-browser");s===!0?(n=function(){return null},i=t("url-parse")):(n=t("parse-domain"),i=t("url").parse),e.exports=r},{"is-browser":3,"parse-domain":void 0,url:void 0,"url-parse":5}],2:[function(t,e,o){"use strict";function r(t,e){this.activeHosts={},this.items={},this.priorityQueue=[],this.activeSockets=0,this.counter=0,this.handlers=e||{},this.options=f({},l,t),this.paused=!1}function n(t,e,o){"function"==typeof t&&(o>0?setTimeout(function(){t.apply(null,e)},o):t.apply(null,e))}function i(t,e){var o=e.priorityQueue.indexOf(t.id);return 0>o?!1:(e.priorityQueue.splice(o,1),!0)}function s(t,e){var o=p(t.url,e.options),r=t.id;return o===!1?new Error("Invalid URI"):(null==r&&(r=e.counter++),void 0!==e.items[r]?new Error("Non-unique ID"):(e.items[r]={active:!1,hostKey:o,id:r,input:t},e.priorityQueue.push(r),r))}function u(t,e){return function(){e.activeSockets--,a(t,e),c(e)}}function a(t,e){e.activeHosts[t.hostKey]--,e.activeHosts[t.hostKey]<=0&&delete e.activeHosts[t.hostKey],delete e.items[t.id],e.priorityQueue.length<=0&&e.activeSockets<=0&&(e.counter=0,n(e.handlers.end,[]))}function c(t){var e,o,r=t.options.maxSockets-t.activeSockets,s=0;if(t.paused!==!0&&!(0>=r))for(;s<t.priorityQueue.length;)if(e=!1,o=t.items[t.priorityQueue[s]],t.options.maxSocketsPerHost>0&&(void 0===t.activeHosts[o.hostKey]?(t.activeHosts[o.hostKey]=1,e=!0):t.activeHosts[o.hostKey]<t.options.maxSocketsPerHost&&(t.activeHosts[o.hostKey]++,e=!0)),e===!0){if(t.activeSockets++,r--,o.active=!0,i(o,t),n(t.handlers.item,[o.input,u(o,t)],t.options.rateLimit),0>=r)break}else s++}var p=t("./getHostKey"),f=t("object-assign"),l={defaultPorts:{ftp:21,http:80,https:443},ignorePorts:!0,ignoreSchemes:!0,ignoreSubdomains:!0,maxSockets:1/0,maxSocketsPerHost:1,rateLimit:0};r.prototype.dequeue=function(t){var e=this.items[t];return void 0===e||e.active===!0?new Error("ID not found"):(i(e,this),a(e,this),!0)},r.prototype.enqueue=function(t){var e;return("string"==typeof t||t instanceof String==!0)&&(t={url:t}),e=s(t,this),e instanceof Error==!1&&c(this),e},r.prototype.length=function(){return this.priorityQueue.length},r.prototype.numActive=function(){return this.activeSockets},r.prototype.pause=function(){this.paused=!0},r.prototype.resume=function(){this.paused=!1,c(this)},e.exports=r},{"./getHostKey":1,"object-assign":4}],3:[function(t,e,o){e.exports=!0},{}],4:[function(t,e,o){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var o,s,u=r(t),a=1;a<arguments.length;a++){o=Object(arguments[a]);for(var c in o)n.call(o,c)&&(u[c]=o[c]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(o);for(var p=0;p<s.length;p++)i.call(o,s[p])&&(u[s[p]]=o[s[p]])}}return u}},{}],5:[function(t,e,o){"use strict";function r(t,e,o){if(!(this instanceof r))return new r(t,e,o);var c,p,f,l,h=u.test(t),d=typeof e,y=this,m=0;for("object"!==d&&"string"!==d&&(o=e,e=null),o&&"function"!=typeof o&&(o=s.parse),e=i(e);m<a.length;m++)p=a[m],c=p[0],l=p[1],c!==c?y[l]=t:"string"==typeof c?~(f=t.indexOf(c))&&("number"==typeof p[2]?(y[l]=t.slice(0,f),t=t.slice(f+p[2])):(y[l]=t.slice(f),t=t.slice(0,f))):(f=c.exec(t))&&(y[l]=f[1],t=t.slice(0,t.length-f[0].length)),y[l]=y[l]||(p[3]||"port"===l&&h?e[l]||"":""),p[4]&&(y[l]=y[l].toLowerCase());o&&(y.query=o(y.query)),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(p=y.auth.split(":"),y.username=p[0]||"",y.password=p[1]||""),y.href=y.toString()}var n=t("requires-port"),i=t("./lolcation"),s=t("querystringify"),u=/^\/(?!\/)/,a=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(t,e,o){var r=this;return"query"===t?("string"==typeof e&&e.length&&(e=(o||s.parse)(e)),r[t]=e):"port"===t?(r[t]=e,n(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=e,r.port&&(e+=":"+r.port),r.host=e):"host"===t?(r[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),r.hostname=e[0],r.port=e[1])):r[t]=e,r.href=r.toString(),r},r.prototype.toString=function(t){t&&"function"==typeof t||(t=s.stringify);var e,o=this,r=o.protocol+"//";return o.username&&(r+=o.username,o.password&&(r+=":"+o.password),r+="@"),r+=o.hostname,o.port&&(r+=":"+o.port),r+=o.pathname,o.query&&(e="object"==typeof o.query?t(o.query):o.query,r+=("?"===e.charAt(0)?"":"?")+e),o.hash&&(r+=o.hash),r},r.qs=s,r.location=i,e.exports=r},{"./lolcation":6,querystringify:7,"requires-port":8}],6:[function(t,e,o){(function(o){"use strict";var r,n={hash:1,query:1};e.exports=function(e){e=e||o.location||{},r=r||t("./");var i,s={},u=typeof e;if("blob:"===e.protocol)s=new r(unescape(e.pathname),{});else if("string"===u){s=new r(e,{});for(i in n)delete s[i]}else if("object"===u)for(i in e)i in n||(s[i]=e[i]);return s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":5}],7:[function(t,e,o){"use strict";function r(t){for(var e,o=/([^=?&]+)=([^&]*)/g,r={};e=o.exec(t);r[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return r}function n(t,e){e=e||"";var o=[];"string"!=typeof e&&(e="?");for(var r in t)i.call(t,r)&&o.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return o.length?e+o.join("&"):""}var i=Object.prototype.hasOwnProperty;o.stringify=n,o.parse=r},{}],8:[function(t,e,o){"use strict";e.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 22!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}]},{},[2])(2)});